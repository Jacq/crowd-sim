<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\app\Render\LinePrototype.js - CrowdSim</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="CrowdSim" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/2 Dimensional Vector.html">2 Dimensional Vector</a></li>
                                <li><a href="../classes/Agent.html">Agent</a></li>
                                <li><a href="../classes/AssignableToGroup.html">AssignableToGroup</a></li>
                                <li><a href="../classes/Behavior.html">Behavior</a></li>
                                <li><a href="../classes/Colors.html">Colors</a></li>
                                <li><a href="../classes/Common utilities.html">Common utilities</a></li>
                                <li><a href="../classes/Context.html">Context</a></li>
                                <li><a href="../classes/CrowdSim.html">CrowdSim</a></li>
                                <li><a href="../classes/CrowdSimApp.html">CrowdSimApp</a></li>
                                <li><a href="../classes/Detail.html">Detail</a></li>
                                <li><a href="../classes/Engine.html">Engine</a></li>
                                <li><a href="../classes/Entity.html">Entity</a></li>
                                <li><a href="../classes/EntityPrototype.html">EntityPrototype</a></li>
                                <li><a href="../classes/Fonts.html">Fonts</a></li>
                                <li><a href="../classes/Grid.html">Grid</a></li>
                                <li><a href="../classes/Group.html">Group</a></li>
                                <li><a href="../classes/Joint.html">Joint</a></li>
                                <li><a href="../classes/Line.html">Line</a></li>
                                <li><a href="../classes/LinePrototype.html">LinePrototype</a></li>
                                <li><a href="../classes/Panic.html">Panic</a></li>
                                <li><a href="../classes/Path.html">Path</a></li>
                                <li><a href="../classes/Render.html">Render</a></li>
                                <li><a href="../classes/Wall.html">Wall</a></li>
                                <li><a href="../classes/World.html">World</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/Agent.html">Agent</a></li>
                                <li><a href="../modules/Base.html">Base</a></li>
                                <li><a href="../modules/Behavior.html">Behavior</a></li>
                                <li><a href="../modules/Common.html">Common</a></li>
                                <li><a href="../modules/Context.html">Context</a></li>
                                <li><a href="../modules/CrowdSim.html">CrowdSim</a></li>
                                <li><a href="../modules/CrowdSimApp.html">CrowdSimApp</a></li>
                                <li><a href="../modules/Detail.html">Detail</a></li>
                                <li><a href="../modules/Engine.html">Engine</a></li>
                                <li><a href="../modules/Entities.html">Entities</a></li>
                                <li><a href="../modules/Entity.html">Entity</a></li>
                                <li><a href="../modules/Group.html">Group</a></li>
                                <li><a href="../modules/Joint.html">Joint</a></li>
                                <li><a href="../modules/LinePrototype.html">LinePrototype</a></li>
                                <li><a href="../modules/Panic.html">Panic</a></li>
                                <li><a href="../modules/Path.html">Path</a></li>
                                <li><a href="../modules/Render.html">Render</a></li>
                                <li><a href="../modules/Wall.html">Wall</a></li>
                                <li><a href="../modules/World.html">World</a></li>
                                <li><a href="../modules/Worlds.html">Worlds</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\app\Render\LinePrototype.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x27;use strict&#x27;;

var Base = require(&#x27;./Base&#x27;);
var Joint = require(&#x27;./Joint&#x27;);
var Entity = require(&#x27;./Entity&#x27;);
var Detail = require(&#x27;./Detail&#x27;);
var Colors = Base.Colors;

/**
 * Line rendering for paths and walls prototype.
 *
 * @class LinePrototype
 * @constructor
 * @module Render
 * @submodule LinePrototype
 * @param {Number} color
 * @return {LinePrototype} Line prototype
 */
var LinePrototype = function(color) {

  /**
   * Line rendering for paths and walls.
   *
   * @constructor
   * @method Line
   * @param {Wall|Path} line
   */
  var Line = function(line) {
    if (!line) {
      throw &#x27;Line object must be defined&#x27;;
    }
    Entity.call(this, line);
  };

  /**
   * Create base graphics.
   *
   * @method createGraphics
   * @param {Wall|Path} line
   */
  Line.prototype.createGraphics = function(line) {
    this.graphics = Entity.prototype.createGraphics.call(this, Line.container);
    this.label = new PIXI.Text(line.id, Base.Fonts.default);
    this.label.resolution = Base.Fonts.resolution;
    this.graphics.addChild(this.label);
    var jts = line.getJoints();
    this.label.x = jts[0].pos[0] - this.label.width / 2;
    this.label.y = jts[0].pos[1] - this.label.height / 2;
    if (jts &amp;&amp; jts.length &gt; 0) {
      for (var i in jts) {
        this.addJointFromModel(jts[i]);
      }
    }
  };

  /**
   * Destroy base graphics.
   *
   * @method destroy
   */
  Line.prototype.destroy = function() {
    var that = this;
    that.graphics.removeChild(that.label);
    that.label.destroy();
    Entity.prototype.destroyGraphics.call(that, Line.container, that.graphics);
    Entity.prototype.destroy.call(that);
  };

  /**
   * Add a render joint from a joint entity.
   *
   * @method addJointFromModel
   * @param {Joint} joint
   * @return {Render.Joint} render joint
   */
  Line.prototype.addJointFromModel = function(joint) {
    var renderJoint = new Joint(joint, Line.texture);
    renderJoint.createGraphics(this.graphics);
    return renderJoint;
  };

  /**
   * Create a joint in a position.
   *
   * @method addJoint
   * @param {Number} x
   * @param {Number} y
   * @param {Options} options for creation
   * @return {Render.Joint}
   */
  Line.prototype.addJoint = function(x, y, options) {
    var line = this.entityModel;
    var jt = line.addJoint(x, y, options);
    return this.addJointFromModel(jt);
  };

  /**
   * Animate joint, position and radius.
   *
   * @method render
   * @param {Object} options
   */
  Line.prototype.render = function(options) {
    if (!Line.detail.level) {
      this.graphics.clear();
      return;
    }
    Entity.prototype.render.call(this, this.graphics);
    var line = this.entityModel;
    var jts = line.getJoints();
    if (!line || jts.length === 0) {
      this.destroy();
      for (var i = 0; i &lt; jts.length; i++) {
        jts[i].view.show(false);
      }
    }
    // init render
    if (!this.graphics &amp;&amp; Line.detail.level &gt; 0) {
      this.createGraphics(line);
    } else {
      this.graphics.clear();
    }

    if (Line.detail.level &gt; 0) {
      var points  = [];
      this.label.x = jts[0].pos[0] - this.label.width / 3;
      this.label.y = jts[0].pos[1] - this.label.height ;
      this.graphics.lineStyle(line.getWidth(), this.hover ? Colors.Hover : color, 0.6);
      for (var j = 0; j &lt; jts.length; j++) {
        points.push(jts[j].pos[0], jts[j].pos[1]);
        jts[j].view.render();
      }
      this.graphics.drawPolygon(points);
    }
    if (Line.detail.level &gt; 1) {
    }
  };
  return Line;
};

module.exports = LinePrototype;

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>

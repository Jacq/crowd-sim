/**
* crowd-sim.min.js 0.1.2-edge 2014-11-10
* 
* License: 
*/

!function(){"use strict";var a={},b={running:!1,iterations:0,STEP:60};b.init=function(a,b){return this.world=a,this.options=b,this.world},b.run=function(){this.running||(this.running=!0,this._step())},b.step=function(){this.running||this._step()},b._step=function(){if(this.world&&this.world.entities)for(var a in this.world.entities){var c=this.world.entities[a];c.acceleration.x=(Math.random()-.5)/1e3,c.acceleration.y=(Math.random()-.5)/1e3,c.velocity.x+=c.acceleration.x*b.STEP,c.velocity.y+=c.acceleration.y*b.STEP,c.direction=Math.atan2(c.velocity.y,c.velocity.x),c.position.x+=c.velocity.x*b.STEP,c.position.y+=c.velocity.y*b.STEP,this.world.wrap&&(c.position.x>this.world.MAX_X&&(c.position.x=this.world.MIN_X+c.position.x-this.world.MAX_X),c.position.x<this.world.MIN_X&&(c.position.x=this.world.MAX_X-(this.world.MIN_X-c.position.x)),c.position.y>this.world.MAX_Y&&(c.position.y=this.world.MIN_Y+c.position.y-this.world.MAX_Y),c.position.y<this.world.MIN_Y&&(c.position.y=this.world.MAX_Y-(this.world.MIN_Y-c.position.y))),this.options.onStep&&this.options.onStep(this)}if(this.iterations++,this.running){var d=this;setTimeout(function(){d._step()},this.STEP)}},b.stop=function(){this.running&&(this.running=!1)},b.reset=function(){this.iterations=0,this.running=!1},a.World=function(a,b){this.entities=[],this.wrap=!0,this.MAX_X=a,this.MIN_X=0,this.MAX_Y=b,this.MIN_Y=0,this.add=function(a){this.entities.push(a)}},a.Single=function(a,b,c,d){this.position={x:a,y:b},this.velocity={x:0,y:0},this.acceleration={x:0,y:0},this.size=c,this.direction=d,this.view={}},a.Engine=b,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports.CrowdSim=a),"function"==typeof define&&define.amd&&define("CrowdSim",[],function(){return a}),"object"==typeof window&&"object"==typeof window.document&&(window.CrowdSim=a)}();